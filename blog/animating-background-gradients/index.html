<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.75 'Futura','Trebuchet MS','Arial',sans-serif;box-sizing:border-box;overflow-y:scroll;background:linear-gradient( 120deg, hsla(45, 99%, 97%, 0.7) 0%, hsla(189, 100%, 96%, 0.5) 50%, hsla(335, 100%, 95%, 0.5) 100% );}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:black;font-family:'Futura','Trebuchet MS','Arial',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:Montserrat,sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:2.5rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'arial rounded mt bold','Futura','Trebuchet MS','Arial',sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.73286rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'arial rounded mt bold','Futura','Trebuchet MS','Arial',sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1.4427rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'arial rounded mt bold','Futura','Trebuchet MS','Arial',sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;letter-spacing:0.140625em;text-transform:uppercase;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'arial rounded mt bold','Futura','Trebuchet MS','Arial',sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.83255rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;color:inherit;font-family:'arial rounded mt bold','Futura','Trebuchet MS','Arial',sans-serif;font-weight:900;text-rendering:optimizeLegibility;font-size:0.75966rem;line-height:1.1;font-style:italic;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}ul{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:1.75rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;list-style:disc;}ol{margin-left:1.75rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.875rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:0.85rem;line-height:1.75rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1rem;line-height:1.75rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}blockquote{margin-left:-1.75rem;margin-right:1.75rem;margin-top:0;padding-bottom:0;padding-left:1.42188rem;padding-right:0;padding-top:0;margin-bottom:1.75rem;font-size:1.20112rem;line-height:1.75rem;color:hsla(0,0%,0%,0.59);font-style:italic;border-left:0.32813rem solid hsla(0,0%,0%,0.9);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}hr{margin-left:0;margin-right:0;margin-top:calc(1.75rem - 1px);padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.75rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.75rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.75rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}li > ul{margin-left:1.75rem;margin-bottom:calc(1.75rem / 2);margin-top:calc(1.75rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.75rem / 2);}code{font-size:0.85rem;line-height:1.75rem;}kbd{font-size:0.85rem;line-height:1.75rem;}samp{font-size:0.85rem;line-height:1.75rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.16667rem;padding-right:1.16667rem;padding-top:0.875rem;padding-bottom:calc(0.875rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.75rem;color:hsla(0,0%,0%,0.9);font-weight:400;}blockquote cite:before{content:"‚Äî ";}ul,ol{margin-left:0;}@media only screen and (max-width:480px){ul,ol{margin-left:1.75rem;}blockquote{margin-left:-1.3125rem;margin-right:0;padding-left:0.98438rem;}}h1,h2,h3,h4,h5,h6{margin-top:3.5rem;}a{box-shadow:0px -0.19444rem 0px 0px #00ddff inset;color:black;text-decoration:none;transition:box-shadow 0.3s;}a:hover,a:active{box-shadow:none;}mark,ins{background:#007acc;color:white;padding:0.10938rem 0.21875rem;text-decoration:none;}html, body{min-width:100%;min-height:100%;}main{margin:2.625rem 0;}.card{position:relative;padding:1.75rem;margin:1.75rem;border-radius:24px;box-shadow:-8px -6px 80px 0 inset hsla(0, 0%, 100%, 0.38);}.cv .card h4{margin-bottom:0.5em;}.cv p{margin-bottom:0;}.cv ul{margin-top:calc(1.75rem / 2);}.qrlink{position:absolute !important;top:1.75rem;right:1.75rem;display:none !important;}h1, h2, h3, h4, h5, h6{font-family:arial rounded mt bold,Futura,Trebuchet MS,Arial,sans-serif;}header h1, header h2, header h3, header h4, header h5, header h6, main.cv h1, main.cv h2, main.cv h3, main.cv h4, main.cv h5, main.cv h6{margin-top:0;}h1 > a, h2 > a, h3 > a, h4 > a, h5 > a, h6 > a{box-shadow:0px -0.19444rem 0px 0px #00ddff inset;}a.external-link{box-shadow:0px -0.19444rem 0px 0px hsla(334, 100%, 45%, 1) inset;}a:hover, a:focus{box-shadow:0px -1.75rem 0px 0px #ffc800 inset;color:black;}</style><style data-href="/styles.d356a0bce69eaadd9db6.css">.card:after,.card:before{content:"";position:absolute;z-index:-1}.card:before{width:calc(100% + 4px);height:calc(100% + 4px);top:-2px;left:-2px;background:linear-gradient(156deg,hsla(0,0%,100%,.88),hsla(0,0%,100%,.88) 35%,hsla(0,0%,100%,0) 59%,hsla(0,0%,75%,.38) 84%,hsla(0,0%,60%,.18));border-radius:26px;box-shadow:-16px -16px 40px 0 hsla(0,0%,100%,.8),2px 2px 8px -8px hsla(0,0%,66.3%,.57),16px 4px 64px 0 hsla(0,0%,66%,.6)}.card:after{width:100%;height:100%;top:0;left:0;background:rgba(255,250,252,.7);border-radius:24px}@media screen and (max-width:375px){.card{margin:1.75rem .75rem}}@media screen and (max-width:512px){.cv p{margin-bottom:.875rem}}@media screen and (min-width:512px){.cv header.card a:first-of-type,.cv header.card h3:first-of-type{display:none}.cv .card h4{line-height:1.75;margin-bottom:0}.cv .card>div>div{display:grid;grid-template-columns:1fr 2fr;grid-gap:0 1em}.cv ul,.cv ul li:last-of-type{margin-bottom:0}}@media print{html{font-size:12px}#___gatsby>div>div{max-width:unset!important}.card,.card:after,.card:before,a,html{background:none!important;box-shadow:none!important;margin-bottom:0;padding-bottom:0}main{margin:0}.card>h3{page-break-after:avoid}.card>div{page-break-before:avoid}.card>div>div{page-break-inside:avoid}.cv .card>div>div{display:grid;grid-template-columns:1fr 2fr;grid-gap:0 1em}.cv .card h4{line-height:1.75}.cv .card h4,.cv ul,.cv ul li:last-of-type{margin-bottom:0}.cv hr{margin:calc(.5em - 1px) 0}.qrlink{display:block!important}footer,header a{display:none}}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.19.5"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          let scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          let clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><title data-react-helmet="true">Sheb rocks! ü§ò</title><meta data-react-helmet="true" name="description" content="Adding a first simple animated background to this page has been surprisingly simple. Using a keyframe and CSS gradient, this was fairly easy to integrate."/><meta data-react-helmet="true" property="og:title" content="Animated random background gradients"/><meta data-react-helmet="true" property="og:description" content="Adding a first simple animated background to this page has been surprisingly simple. Using a keyframe and CSS gradient, this was fairly easy to integrate."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Michael Habeth"/><meta data-react-helmet="true" name="twitter:title" content="Animated random background gradients"/><meta data-react-helmet="true" name="twitter:description" content="Adding a first simple animated background to this page has been surprisingly simple. Using a keyframe and CSS gradient, this was fairly easy to integrate."/><link as="script" rel="preload" href="/webpack-runtime-873501ae9b95d801d323.js"/><link as="script" rel="preload" href="/styles-7409cd94d030b7c1804a.js"/><link as="script" rel="preload" href="/app-8d5a87557dc66ac7339a.js"/><link as="script" rel="preload" href="/commons-86bd23118604395774b5.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-acfae5f8c199c35cba66.js"/><link as="fetch" rel="preload" href="/page-data/blog/animating-background-gradients/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This page might bug out without JavaScript.</noscript><div id="___gatsby-background" aria-hidden="true"></div><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:52.5rem"><header class="card"><h1>Animated random background gradients</h1><a href="/">‚Üê Home</a></header><main class="card"><p style="font-size:0.83255rem;line-height:1.75rem;display:block;margin-bottom:1.75rem">October 16, 2019<!-- --> <!-- -->[ <a href="/tags/css">CSS</a>, <a href="/tags/js">JS</a>, <a href="/tags/frontend">Frontend</a>, <a href="/tags/web">Web</a> ]</p><div><p>I wanted to spice the page up a bit and might have gone wholly overboard with this.</p>
<p>My hope was that I could introduce some elevation cards, pretty much found everywhere as part of flat/material design. Sadly my white on white background was a bit boring.<br>
Indecisive as I am, I thought: ‚ÄúWhy not try a gradient? That‚Äôd let me pick multiple colors I might want!‚Äù, that turned into: ‚ÄúI‚Äôve seen animated gradients‚Ä¶ I should do that.‚Äù, which then quickly became: ‚ÄúI don‚Äôt know what colors work! I‚Äôll just randomize it‚Ä¶ I guess?‚Äú.</p>
<p>Like so often, that idea seemed a lot better in my head, than the actual result as it turned out. But first things first.</p>
<p>I wanted my gradient to be easy to use and be globally available. As I‚Äôm using React with Gatsby, I wanted the result to be a oneliner and have it as declarative as possible, and also with the chance to easily improve upon in the future.<br>
If you‚Äôve thought to yourself: ‚ÄúThat‚Äôs pretty on the nose for a component!‚Äù, then you‚Äôre right.</p>
<p>My usage is simply the following line, added to my layout component:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>Themer <span class="token operator">/</span><span class="token operator">></span></code></pre></div>
<p>This currently is a component, that doesn‚Äôt take any props (including children) and also doesnt render anything out.</p>
<p>Due to the fact that the <code class="language-text">ReactDOM.render()</code> from <code class="language-text">react-dom</code> here in use by the Gatsby, doesn‚Äôt attach to the <code class="language-text">&lt;html&gt;</code> root tag and also probably shouldn‚Äôt, I wanted to break out of the attached context and attach the gradient style to the DOM outside of my React context.</p>
<p>On the one hand, that‚Äôs a pretty bad idea, since it‚Äôs not managed from React and I‚Äôm basically setting stuff outside my scope, because I can. Doing so is in total disregard of what might already be there and who or what else uses that attribute. On the other hand, it also opens up another possibility: state persistence across renders, without having to muck with the Gatsby setup. So far I‚Äôm reshuffling the gradient on every rerender, but I might want to keep it across renders and since it‚Äôs not part of the React render, that also means it‚Äôs not prone to flickering during.</p>
<p>Let‚Äôs look at the code. The Themer component itself is pretty small too. While the original code was pretty concise, this is way more readable.</p>
<p>As we‚Äôre not really going to render anything new directly using this component, but only modify existing DOM, this component doesn‚Äôt need React per se. Here we‚Äôre using the <code class="language-text">useEffect</code> hook so that we can run the update function on rerenders.<br>
If we are going to use hooks, context or JSX for example, we need to import React. Reacts functional components are by definition just plain functions, if we wanted to schedule a background resizing differently or didn‚Äôt care about the background size, we could do without the import.<br>
Themer runs, modifies and returns <code class="language-text">null</code> for React to render - nothing.<br>
The query and modification of the :root style is wrapped in a conditional, so that the code doesn‚Äôt run during Gatsby compile-time. If it wasn‚Äôt it would throw an undefined.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Themer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> gradientRotation <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">360</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> <span class="token function-variable function">randomColor</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token string">'#'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">0xffffff</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">'0'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> randomGradientLength <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> gradientColors <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>length<span class="token operator">:</span> randomGradientLength<span class="token punctuation">}</span><span class="token punctuation">,</span> randomColor<span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">update</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> root <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">':root'</span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> scaledMaxDimension <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">,</span> root<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span>
    <span class="token keyword">const</span> gradient <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">linear-gradient(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gradientRotation<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">deg,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gradientColors<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">) 0 0 / </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>maxDimension<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>maxDimension<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span>

    root<span class="token punctuation">.</span>style<span class="token punctuation">[</span><span class="token string">'background'</span><span class="token punctuation">]</span> <span class="token operator">=</span> gradient
  <span class="token punctuation">}</span>

  React<span class="token punctuation">.</span><span class="token function">useEffect</span><span class="token punctuation">(</span>update<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Themer</code></pre></div>
<p>First the <code class="language-text">linear-gradient</code> takes a rotation value. We could‚Äôve put any deg value, but decided to get a random integer between zero and 360, appending deg. The rest of the arguments passed to the gradient are the gradient colors.</p>
<p>The part that tripped me up was my #RGB-value creating <code class="language-text">randomColor()</code> function, which at first didn‚Äôt have the zero-padding of the generated String.<br>
If the random value was too low the #RGB-value was of invalid length. It didn‚Äôt happen too often, but of course still more than enough, leaving the background white. The string (excluding the #) is allowed to be either three or six hex-characters of <code class="language-text">[0-9a-f]</code> long, but could be anywhere between one or six without the padding.<br>
Thinking about #RGB as one long hex-value, creating the hex is easier calculated, than looping through the allowed alphabet and concatenating the characters to a string. We create a decimal from zero to 0xffffff which corresponds to 16777215, floor it to an integer, then convert it to a base 16 string and zero-pad if it‚Äôs too short, then finally concat it with # to get a valid #RGB-value.</p>
<p>The animation isn‚Äôt too interesting, but luckily a moving gradient can be done in pure CSS. The gradient itself might not be animated, but we‚Äôre setting a background larger than the viewport and move the background-position. In this case we‚Äôve made the background a square with the sides as long as the largest px-value of rendered content.<br>
<code class="language-text">background</code> is shorthand for multiple background properties. After the background-color definition of linear-gradient there is a background-position and then delimited by / the background-size, written as <code class="language-text">0 0 / ${maxDimension}px ${maxDimension}px</code>.</p>
<p>What is left is creating the keyframes and attaching them using CSS.</p>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">animation</span><span class="token punctuation">:</span> animatedBackgroundGradient 30s ease alternate infinite<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token atrule"><span class="token rule">@keyframes</span> animatedBackgroundGradient</span> <span class="token punctuation">{</span>
	<span class="token selector">0%</span> <span class="token punctuation">{</span>
		<span class="token property">background-position</span><span class="token punctuation">:</span> 0% 0%<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token selector">25%</span> <span class="token punctuation">{</span>
		<span class="token property">background-position</span><span class="token punctuation">:</span> 0% 50%<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token selector">50%</span> <span class="token punctuation">{</span>
		<span class="token property">background-position</span><span class="token punctuation">:</span> 100% 0%<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token selector">75%</span> <span class="token punctuation">{</span>
		<span class="token property">background-position</span><span class="token punctuation">:</span> 100% 50%<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token selector">100%</span> <span class="token punctuation">{</span>
		<span class="token property">background-position</span><span class="token punctuation">:</span> 0% 0%<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>All in all this results in some pretty, some very unnoticable, but also some pretty ugly color combinations. It‚Äôs a hit or miss.<br>
To improve on this, there‚Äôs a lot of thinking about actual color theory, color representation and then animation left to do. The hard cutoffs need to go, same as weird color combinations and generally picking some muddy colors. For now it just runs.<br>
Sadly this also means <em>‚Äúit just runs‚Äù</em>. You can‚Äôt turn it off and you can‚Äôt guarantee, that it doesn‚Äôt bug people out.</p>
<p>Since this is my first real blog post, it‚Äôll do for now and I‚Äôll get back to it later. Once I change the setup, I‚Äôll reference the hash of the git repo here. I might also add some media.</p></div><hr style="margin-bottom:1.75rem"/><ul style="margin-bottom:0;display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0"><li><a rel="prev" href="/blog/under-construction/">‚Üê <!-- -->WIP - This page is under construction!</a></li><li><a rel="next" href="/blog/javascript-destructuring/">JavaScript destructuring<!-- --> ‚Üí</a></li></ul></main><footer class="card"><div class=" gatsby-image-wrapper" style="position:relative;overflow:hidden;margin-right:0.875rem;margin-bottom:0;min-width:7rem;min-height:8.75rem;bottom:0;float:left;border-radius:0.4375rem;box-shadow:-12px -6px 36px 0 hsl(0, 0%, 100%), 4px 4px 14px -3.2px hsla(0, 0%, 79%, 1)"><div aria-hidden="true" style="width:100%;padding-bottom:100%"></div><img aria-hidden="true" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAQEAAwAAAAAAAAAAAAAAAAIDAQQF/8QAFwEBAQEBAAAAAAAAAAAAAAAAAgMAAf/aAAwDAQACEAMQAAAB8u+vZfKXKZbClYy//8QAHBAAAgICAwAAAAAAAAAAAAAAAQIAEQMSEyMx/9oACAEBAAEFAn6mVQBcyHZg5A5IZew8n//EABcRAQADAAAAAAAAAAAAAAAAAAABAhH/2gAIAQMBAT8Bo2qGy//EABgRAAIDAAAAAAAAAAAAAAAAAAACEBEh/9oACAECAQE/AW0qf//EAB0QAAEEAgMAAAAAAAAAAAAAAAIAARAREjEhMkH/2gAIAQEABj8CJh0SyzWijm11aGvyP//EABwQAAICAwEBAAAAAAAAAAAAAAABESExQXFR4f/aAAgBAQABPyF6DBHClN+Ia/ctBHunF6G4ZCabmcLg9ElR/9oADAMBAAIAAwAAABAPCH7/xAAaEQACAgMAAAAAAAAAAAAAAAAAARExIWGh/9oACAEDAQE/EIJ5NnCw5rP/xAAZEQABBQAAAAAAAAAAAAAAAAAAARARUXH/2gAIAQIBAT8QoMtCH//EAB8QAQADAAIBBQAAAAAAAAAAAAEAESFBUXExYYGRsf/aAAgBAQABPxDBSzsv1Dn1C4pFOSPW5Eti+7WMnAwlchBwFMKPPMtU4dqv7MLzGlsk/KpV5GNBZ//Z" alt="Michael Habeth" style="position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;object-position:center;opacity:1;transition-delay:500ms"/><noscript><picture><source srcset="/static/4b0d7fd3a036da4bff537266f967138c/f836f/profile-pic.jpg 200w,
/static/4b0d7fd3a036da4bff537266f967138c/2244e/profile-pic.jpg 400w,
/static/4b0d7fd3a036da4bff537266f967138c/14b42/profile-pic.jpg 800w,
/static/4b0d7fd3a036da4bff537266f967138c/47498/profile-pic.jpg 1200w,
/static/4b0d7fd3a036da4bff537266f967138c/30fda/profile-pic.jpg 1321w" sizes="(max-width: 800px) 100vw, 800px" /><img loading="lazy" sizes="(max-width: 800px) 100vw, 800px" srcset="/static/4b0d7fd3a036da4bff537266f967138c/f836f/profile-pic.jpg 200w,
/static/4b0d7fd3a036da4bff537266f967138c/2244e/profile-pic.jpg 400w,
/static/4b0d7fd3a036da4bff537266f967138c/14b42/profile-pic.jpg 800w,
/static/4b0d7fd3a036da4bff537266f967138c/47498/profile-pic.jpg 1200w,
/static/4b0d7fd3a036da4bff537266f967138c/30fda/profile-pic.jpg 1321w" src="/static/4b0d7fd3a036da4bff537266f967138c/14b42/profile-pic.jpg" alt="Michael Habeth" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center"/></picture></noscript></div><p>Personal site and blog of <strong>Michael Habeth</strong>.</p><p>I like to create stuff and in my spare time I enjoy reading, drinking coffee or building stuff humanity most definitely didn&#x27;t need in the first place.</p><p style="margin-bottom:0">You can message me on <!-- --> <a class="external-link" href="https://keybase.io/sheb">keybase</a>, <!-- --> <a class="external-link" href="https://twitter.com/shebtastic">twitter</a>, or write me a <!-- --> <a class="external-link" href="mailto:michael@sheb.rocks?subject=Tell%20me%20more!&amp;body=I&#x27;m%20interested%20in%20%3C%20training%20%7C%20speaking%20%7C%20workshops%20%7C%20other-opportunities%20%3E%20on%20the%20topic%20of%20%3C%20topic%20%3E.%0A%0ADescription:%20%0AContact:%0A">mail</a>.</p><div style="clear:both"></div><hr/>¬© <!-- -->2020<!-- -->, Built with<!-- --> <a class="external-link" href="https://www.gatsbyjs.org" rel="noopener noreferrer">Gatsby</a>.<!-- --> <!-- -->Hosted on<!-- --> <a class="external-link" href="https://www.pages.github.com" rel="noopener noreferrer">GitHub Pages</a>.<br/>All the websites code can be found on this<!-- --> <a class="external-link" href="https://www.github.com/shebtastic/sheb.rocks" rel="noopener noreferrer">GitHub Repo</a>.<br/><br/>You can <a href="/cv">find my CV here</a>.<hr/><a href="/imprint">Imprint (Impressum)</a> <a href="/dataprivacy">Data Privacy Policy (Datenschutzerkl√§rung)</a></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/animating-background-gradients/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8d5a87557dc66ac7339a.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-acfae5f8c199c35cba66.js"],"component---src-templates-tag-js":["/component---src-templates-tag-js-7106c98c7d1e88da555b.js"],"component---src-pages-404-js":["/component---src-pages-404-js-8befb8f45c133070e646.js"],"component---src-pages-cv-js":["/component---src-pages-cv-js-0cddaacd30b923482e09.js"],"component---src-pages-dataprivacy-js":["/component---src-pages-dataprivacy-js-6b9ce64963230b0e6362.js"],"component---src-pages-imprint-js":["/component---src-pages-imprint-js-f21baced6c82eb266d0c.js"],"component---src-pages-index-js":["/component---src-pages-index-js-d2f3846e9c8307d0b8d3.js"],"component---src-pages-tags-js":["/component---src-pages-tags-js-5c73e4e6c114e8b949ea.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-acfae5f8c199c35cba66.js" async=""></script><script src="/commons-86bd23118604395774b5.js" async=""></script><script src="/app-8d5a87557dc66ac7339a.js" async=""></script><script src="/styles-7409cd94d030b7c1804a.js" async=""></script><script src="/webpack-runtime-873501ae9b95d801d323.js" async=""></script></body></html>